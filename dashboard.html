<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Planeador - Dashboard</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
  <div class="container">
    <div class="topbar">
      <div class="brand">
        <div class="badge">P</div>
        <div>
          <h1>Planeador CECYTEA</h1>
          <p>Parciales / Semana</p>
        </div>
      </div>
      
      <div class="actions">
        <a class="btn primary" href="./editor.html">+ Nueva planeaci√≥n</a>
        <button class="btn" id="btnExport">Exportar Planeaci√≥n</button>
        <a class="btn" href="./dashboard.html" title="Solo recarga en este prototipo">Recargar</a>
        
        
        <button class="btn" id="toogletheme" title="Cambiar tema" aria-label="Cambiar modo claro/oscuro">
          <span id="themeicon">üåô</span>
        </button>
      </div>
    </div>
    
    <div class="grid">
      <div class="card">
        <h2>Planeaciones</h2>
        <p class="hint">Filtra y administra. Abre una para ver/editar/imprimir.</p>
        
        <div class="row">
          <div class="field">
            <label>Buscar (materia, grupo, docente, periodo)</label>
            <input id="q" placeholder="Ej: Programaci√≥n 5A" />
          </div>
          <div class="field">
            <label>Tipo</label>
            <select id="type">
              <option value="all">Todas</option>
              <option value="parcial">Parcial</option>
              <option value="semana">Semana</option>
            </select>
          </div>
          <div class="field">
            <label>Orden</label>
            <select id="order">
              <option value="new">M√°s recientes</option>
              <option value="old">M√°s antiguas</option>
              <option value="az">A ‚Üí Z (materia)</option>
            </select>
          </div>
        </div>
        
        <div class="pills">
          <div class="pill"><span>Total</span><b id="countTotal">0</b></div>
          <div class="pill"><span>Parcial</span><b id="countParcial">0</b></div>
          <div class="pill"><span>Semana</span><b id="countSemana">0</b></div>
        </div>
        
        <div class="list" id="list"></div>
        <div id="empty" class="notice" style="display:none; margin-top:12px">
          No hay planeaciones todav√≠a. Crea una con "Nueva planeaci√≥n".
        </div>
      </div>
      
      <div class="card">
        <h2>Plantillas r√°pidas</h2>
        <p class="hint">Crea una planeaci√≥n con estructura prellenada.</p>
        
        <div class="list">
          <div class="item">
            <p class="itemTitle">Planeaci√≥n Semanal (b√°sica)</p>
            <p class="itemMeta">Inicio‚ÄìDesarrollo‚ÄìCierre ‚Ä¢ Evaluaci√≥n y recursos</p>
            <button class="btn ok mini" data-template="semana">Usar plantilla</button>
          </div>
          <div class="item">
            <p class="itemTitle">Planeaci√≥n de Parcial (b√°sica)</p>
            <p class="itemMeta">Prop√≥sito ‚Ä¢ Aprendizajes ‚Ä¢ Secuencia ‚Ä¢ Evidencias</p>
            <button class="btn ok mini" data-template="parcial">Usar plantilla</button>
          </div>
          <div class="item">
            <p class="itemTitle">üí° Consejo</p>
            <p class="itemMeta">Despu√©s, podemos agregar: r√∫bricas, lista de cotejo, exportar a PDF real, y cuentas por docente.</p>
          </div>
        </div>
        
        <hr class="sep">
        <div class="notice">
          Tip: para imprimir bonito, abre una planeaci√≥n y presiona <b>Imprimir / PDF</b>.
        </div>
      </div>
    </div>
  </div>
  
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script src="./js/utils.js"></script>
  <script src="./js/storage.js"></script>
  <script src="./js/app-dashboard.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.26.17/dist/sweetalert2.all.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.26.17/dist/sweetalert2.min.css" rel="stylesheet">
  
  <!-- ‚îÄ‚îÄ  Claro y Oscuro ‚îÄ‚îÄ -->
  <script>
    (function () {
      const btn   = document.getElementById('toogletheme');
      const icon  = document.getElementById('themeicon');
      const body  = document.body;
      const KEY   = 'planeador_theme';
      
      
      const ICONS = { dark: 'üåô', light: '‚òÄÔ∏è' };
      
      
      const saved = localStorage.getItem(KEY) || 'dark';
      applyTheme(saved, false);
      
      btn.addEventListener('click', () => {
        const next = body.classList.contains('light') ? 'dark' : 'light';
        applyTheme(next, true);
      });
      
      function applyTheme(theme, animate) {
        if (animate) {
          
          btn.style.transform = 'scale(0.85)';
          setTimeout(() => { btn.style.transform = ''; }, 200);
        }
        
        if (theme === 'light') {
          body.classList.add('light');
          icon.textContent = ICONS.light;
        } else {
          body.classList.remove('light');
          icon.textContent = ICONS.dark;
        }
        localStorage.setItem(KEY, theme);
      }
    })();
  </script>
  
  
  <script>
    if (localStorage.getItem("loggedIn") !== "true") {
      alert("Debes iniciar sesi√≥n primero");
      window.location.href = "index.html";
    }
  </script>
</body>
</html>
